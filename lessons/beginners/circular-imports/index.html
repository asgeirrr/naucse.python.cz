<!doctype html>
<html lang="cs">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>
            
                Poznámka k importu
            
        </title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
        <link rel="stylesheet" href="/static/css/nausce.css">
        <link rel="stylesheet" href="/static/css/body.css">
        <link rel="stylesheet" href="/static/css/pygments-lovelace-style.css">
        

        
        

        <style>
            
    

        </style>
    </head>
    
    <body>
        
        <nav class="header">
            <ul class="container menu">
                <li><a href="/" class="logo"><h1>Nauč se Python!</h1></a></li>
                <li><a href="/courses/" class="menu-link"><h2>Materiály</h2></a></li>
                <li><a href="/runs/" class="menu-link"><h2>Kurzy</h2></a></li>
            </ul>
        </nav>
        

        
            <div class="content">
                <div class="alert alert-danger" role="alert">
                    Tato stránka je momentálně v rekonstrukci.
                    Pokud se chcete podílet na vylepšování těchto stránek,
                    navštivte repozitář na
                    <a href="https://github.com/pyvec/naucse.python.cz">GitHubu</a>.
                </div>
            </div>
        

        

<div class="page">
    <div class="container">

        

        
            <div class="slides row stuff">
                <section class="col-lg-12">
                    <section>
                        <h1>Poznámka o importování</h1>
                    </section>
                    <section>
                        <aside class="notes">
                            V domácích úlohách budeme rozdělovat 1D Piškvorky
                            na několik modulů.
                            Výsledek bude vypadat třeba nějak takhle:
                            (Šipky mezi moduly znázorňují importování.)
                        </aside>
<pre>
┌──────────────────╮  ┌───────────────╮  ┌──────────────────╮ 
│      ai.py       │◀-│ piskvorky.py  │◀-│    hra.py        │
├──────────────────┤  ├───────────────┤  ├──────────────────┤
│                  │  │ import ai     │  │ import piskvorky │
├──────────────────┤  ├───────────────┤  ├──────────────────┤
│ def tah_pocitace │  │ def vyhodnot  │  │                  │
│                  │  │ def tah       │  │                  │
└──────────────────┘  │ def tah_hrace │  └──────────────────┘
                      │               │
                      └───────────────┘  
                          ▲
                          │
                    ┌───────────────────╮
                    │ test_piskvorky.py │
                    ├───────────────────┤
                    │ import piskvorky  │
                    ├───────────────────┤
                    │ def test_...      │
                    │                   │
                    └───────────────────┘
</pre>
                    </section>
                    <section>
                        <aside class="notes">
                            Jenže funkce <code>tah_pocitace</code>
                            většinou potřebuje volat funkci <code>tah</code>.
                            Co s tím?
                            Můžeme importovat <code>ai</code>
                            z <code>piskvorky</code>, a zároveň
                            <code>piskvorky</code> z <code>ai</code>?
                        </aside>
<pre>
┌──────────────────╮  ┌───────────────╮
│      ai.py       │◀-│ piskvorky.py  │
├──────────────────┤-▶├───────────────┤
│ import piskvorky │  │ import ai     │
├──────────────────┤  ├───────────────┤
│ def tah_pocitace │  │ def vyhodnot  │
│                  │  │ def tah       │
└──────────────────┘  │ def tah_hrace │
                      │               │
                      └───────────────┘  
</pre>
                        <aside class="notes">
                            Můžeme se na to podívat z hlediska Pythonu,
                            který příkazy v souborech vykonává.
                            Když má spustit (nebo importovat) soubor
                            <code>piskvorky.py</code>, začne ho
                            zpracovávat ho řádek po řádku,
                            když tu (docela brzo) narazí na příkaz
                            <code>import ai</code>.
                            Otevře tedy soubor <code>ai.py</code>,
                            a začne ho zpracovávat, řádek po řádku.
                            Brzy narazí na příkaz
                            <code>import piskvorky</code>. Co teď?
                        </aside>
                        <aside class="notes">
                            Aby nenastala by situace podobná nekonečné smyčce –
                            jeden soubor by importoval druhý, druhý zase první,
                            a tak stále dokola,
                            udělá Python taková malý „podvod“:
                            když zjistí, že soubor <code>piskvorky.py</code>
                            už importuje, zpřístupní v modulu <code>ai</code>
                            modul <code>piskvorky</code> tak jak ho
                            má: nekompletní, bez většiny funkcí co v něm mají
                            být nadefinované.
                            A až potom, co dokončí import <code>ai.py</code>,
                            vrátí se k souboru <code>piskvorky.py</code>
                            a pokračuje v provádění příkazů <code>def</code>
                            které v něm jsou.
                            Takový nekompletní modul může být občas užitečný,
                            ale ve většině případů se chová skoro
                            nepředvídatelně a tudíž nebezpečně.
                        </aside>
                        <aside class="notes note">
                            Jinými slovy: když se dva moduly importují navzájem,
                            nemusí to fungovat podle očekávání.
                        </aside>
                        <aside class="notes">
                            Téhle situaci se budeme chtít
                            vyvarovat.
                        </aside>
                        <aside class="notes">
                            Jak na to? Máme dvě možnosti.
                        </aside>
                    </section>
                </section>
                <section class="col-lg-12">
                    <section>
                        <aside class="notes">
                            <h2 class="notes">Organizace modulů podle závislostí</h2>
                            První možnost je importovat funkci
                            <code>tah</code> v modulu <code>ai</code>,
                            a používat ji odtam.
                            To je jednoduché, ale nerespektuje účel modulu
                            <code>ai</code>, který má obsahovat jenom logiku
                            vybírání tahu počítače, a ne pomocné funkce které
                            můžou být potřeba i jinde.
                        </aside>
<pre>
┌──────────────────╮  ┌───────────────╮
│      ai.py       │◀-│ piskvorky.py  │
├──────────────────┤  ├───────────────┤
│                  │  │ import ai     │
├──────────────────┤  ├───────────────┤
│ def tah_pocitace │  │ def vyhodnot  │
│ def tah          │  │ def tah_hrace │
│                  │  │               │
└──────────────────┘  └───────────────┘
</pre>
                    </section>
                    <section>
                        <aside class="notes">
                            <h2 class="notes">Pomocný modul</h2>
                            Druhá možnost je defunovat nový, sdílený modul,
                            který se naimportuje jak z <code>piskvorky.py</code>
                            tak z <code>ai.py</code>.
                        </aside>
                        <aside class="notes">
                            Často se takový modul jmenuje
                            <code>util.py</code> (z angl. <em>utility</em>,
                            pomůcka, nástroj).
                        </aside>
<pre>
            ┌──────────────────╮
            │ util.py          │
            ├──────────────────┤
            ├──────────────────┤
            │ def tah          │
            └──────────────────┘
                ▲        ▲
                │        │
┌──────────────────╮  ┌───────────────╮
│      ai.py       │◀-│ piskvorky.py  │
├──────────────────┤  ├───────────────┤
│ import util      │  │ import ai     │
│                  │  │ import util   │
├──────────────────┤  ├───────────────┤
│ def tah_pocitace │  │ def vyhodnot  │
│                  │  │ def tah_hrace │
│                  │  │               │
└──────────────────┘  └───────────────┘
</pre>
                        <aside class="notes">
                            Nevýhoda pomocného modulu je ta,
                            že se z něj může stát neudržované „odkladiště“
                            všeho kódu, který byl jednou potřeba na dvou
                            nebo více místech.
                        </aside>
                        <aside class="notes">
                            Pro kterou z možností se rozhodnout, záleží
                            na situaci.
                            Programování není vždycky jen exaktní věda!
                        </aside>
                    </section>
                </section>
            </div>
        

        <hr class="lesson-end">

        

        

    </div>
</div>



        <script type="text/javascript" src="/static/js/solutions.js"></script>

        
        <div class="footer">
            <div class="container">
                <div class="row">
                    <div class="col">
                        <h2>Kontakt</h2>
                        <p>
                            E-mail: <a href="mailto:info@pyvec.org">info@pyvec.org</a><br>
                            GitHub: <a href="http://github.com/pyvec">github.com/pyvec</a><br>
                            Twitter: <a href="http://twitter.com/pyvec">@pyvec</a><br>
                            Youtube: <a href="http://www.youtube.com/pyvec">www.youtube.com/pyvec</a>
                        </p>
                    </div>
                    <div class="col">
                        <h2>Zapoj se</h2>
                        <p>
                            Tyto stránky na <a href="https://github.com/pyvec/naucse.python.cz">GitHubu</a>
                            <br>
                            Organizuj <a href="http://pyladies.cz/stan_se/">PyLadies</a>
                        </p>
                    </div>
                    <div class="col">
                        <h2>Licence</h2>
                        <p>
                            <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        
        <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

    </body>
</html>